{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"src.js","sourcesContent":["(function () {\n\n    // Main application.\n    var app = angular.module('app', []);\n\n    app.controller('AppController', ['$http','$scope', function($http,$scope)\n    {\n        $scope.selected = {};\n\n        $scope.modelSearchField = \"\";\n        $scope.capacities = [];\n        $scope.colors = {};\n\n        this.lookup = [];\n        this.models = {};\n\n        this.selectModel = function(model)\n        {\n            // Needs to reset selections, since things may change.\n            reset();\n            $scope.selected.model = model;\n            this.getSelectedObjects();\n            scrollTo('CapacitySelection');\n        };\n\n        this.selectCapacity = function(capacity)\n        {\n            $scope.selected.color = null;\n            $scope.selected.capacity = capacity;\n            this.getSelectedObjects();\n            scrollTo('ColorSelection');\n        };\n\n        this.selectColor = function(color)\n        {\n            $scope.selected.color = color;\n            this.getSelectedObjects();\n            scrollTo('ReviewSelection');\n        };\n\n        this.modelSearch = function()\n        {\n            var value = $scope.modelSearchField.toUpperCase();\n            this.lookup.forEach(function(device) {\n                if (value === device.model) {\n                    this.selectModel(device.model);\n                }\n            }.bind(this));\n        };\n\n        this.getSelectedObjects = function()\n        {\n            var sel = $scope.selected;\n            var model = this.models[sel.model];\n            if (! model) {\n                $scope.colors = {};\n                $scope.capacities = [];\n            }\n            var capacities = [];\n            var colors = {};\n\n            model.variations.forEach(function(item) {\n                if (capacities.indexOf(item.capacity) == -1) {\n                    capacities.push(item.capacity);\n                }\n                if (sel.capacity && item.capacity==sel.capacity) {\n                    colors[item.colorClass] = item.color;\n                }\n            });\n            $scope.capacities = capacities;\n            $scope.colors = colors;\n        };\n\n        this.getSelectedDevice = function()\n        {\n            var sel = $scope.selected;\n            if (! this.isComplete()) {\n                return null;\n            }\n            return [\"Apple\",this.models[sel.model].name, sel.capacity+\"GB\",sel.color].join(\" \");\n        };\n\n        this.isComplete = function()\n        {\n            var sel = $scope.selected;\n            return sel.model && sel.capacity && sel.color;\n        };\n\n        this.comingSoon = function()\n        {\n            console.log($scope.selected);\n            alert(\"More to come... Check console for POST result\");\n\n        };\n\n        function reset ()\n        {\n            $scope.selected = {\n                model:null, capacity:null, color:null\n            }\n        }\n\n\n        function getModels (lookup)\n        {\n            var models = {};\n            lookup.forEach(function(item) {\n                if (! models[item.model]) {\n                    models[item.model] = {\n                        name:item.name,\n                        image:item.image,\n                        variations: []\n                    }\n                }\n                models[item.model].variations.push({\n                    capacity: item.capacity,\n                    color: item.color,\n                    colorClass: item.colorClass\n                });\n            });\n\n            return models;\n        }\n\n        reset();\n\n        $http.get('/devices', null).success(function(data){\n            this.lookup = data;\n            this.models = getModels(data);\n        }.bind(this));\n    }]);\n\n})();\n\n\n\nfunction scrollTo(id)\n{\n    $('html,body').animate({\n        scrollTop: $(\"#\"+id).offset().top\n    },1000,'easeInOutExpo');\n    //TweenLite.to(window, 2, {scrollTo:{y:}, ease:Power2.easeOut});\n}"],"sourceRoot":"/source/"}